<nb-card>
  <nb-card-body>
    <p *ngIf="!changeEvent">{{ test[0] }}</p>
    <p *ngIf="changeEvent">{{ test[changeEvent.index] }}</p>

    <nb-stepper #stepper (stepChange)="handleStepChange($event)">

      <nb-step [stepControl]="personalForm" label="Personal">
        <form [formGroup]="personalForm" (ngSubmit)="onPersonalFormSubmit()" class="step-container">
          <div class="">
            <label for="name" class="mb-1 ms-1">First name</label>
            <input id="name" class="form-control" nbInput type="text" placeholder="Ivan"
                   formControlName="name"
                   [ngClass]="{'form-control-danger': personalForm.invalid && (personalForm.dirty
                   || personalForm.touched)}">

            <label for="surname" class="mb-1 ms-1 mt-3">Last name</label>
            <input id="surname" class="form-control" nbInput type="text" placeholder="Ivanov"
                   formControlName="surname"
                   [ngClass]="{'form-control-danger': personalForm.invalid && (personalForm.dirty
                   || personalForm.touched)}">

            <label for="title" class="mb-1 ms-1 mt-3">Title</label>
            <input id="title" class="form-control" nbInput type="text" placeholder="Frontend Developer"
                   formControlName="title"
                   [ngClass]="{'form-control-danger': personalForm.invalid && (personalForm.dirty
                   || personalForm.touched)}">

            <label for="address" class="mb-1 ms-1 mt-3">Address</label>
            <input id="address" class="form-control" nbInput type="text" placeholder="125009, Red Square, Moscow, RU"
                   formControlName="address"
                   [ngClass]="{'form-control-danger': personalForm.invalid && (personalForm.dirty
                   || personalForm.touched)}">

            <label for="email" class="mb-1 ms-1 mt-3">Email address</label>
            <input id="email" class="form-control" nbInput type="email" placeholder="ivan.front.dev@gmail.com"
                   formControlName="email"
                   [ngClass]="{'form-control-danger': personalForm.invalid && (personalForm.dirty
                   || personalForm.touched)}">

            <label for="phone" class="mb-1 ms-1 mt-3">Phone number</label>
            <input id="phone" class="form-control" nbInput type="tel" placeholder="+7 (495) 830-29-50"
                   formControlName="phone"
                   [ngClass]="{'form-control-danger': personalForm.invalid && (personalForm.dirty
                   || personalForm.touched)}">
          </div>

          <button class="mt-3" nbButton nbStepperNext type="button">next</button>
        </form>
      </nb-step>



      <nb-step [stepControl]="experiencesForm" label="Experiences">
        <form [formGroup]="experiencesForm" (ngSubmit)="onExperiencesFormSubmit()" class="step-container">

          <div formArrayName="experiencesArr" *ngFor="let expForm of experiences.controls; let i = index" class="mt-3">
            <div [formGroupName]="i">
              <label for="position" class="mb-1 ms-1">Position</label>
              <input id="position" class="form-control" nbInput type="text" placeholder="your position"
                     formControlName="position"
                     [ngClass]="{'form-control-danger': expForm.invalid && (expForm.dirty || expForm.touched)}">
            </div>

            <button nbButton (click)="deleteExperience(i)" class="mt-3">
              <nb-icon icon="trash-2-outline"></nb-icon> Delete experience
            </button>
          </div>

          <button nbButton (click)="addExperience()" class="mt-3">
            <nb-icon icon="plus-circle-outline"></nb-icon> Add experience
          </button>
          <br>

          <button class="mt-3" nbButton nbStepperPrevious type="button">prev</button>
          <button class="mt-3 ms-3" nbButton nbStepperNext type="button">next</button>
        </form>
      </nb-step>

      <nb-step [stepControl]="thirdForm" label="Education">
        <form [formGroup]="thirdForm" (ngSubmit)="onThirdSubmit()" class="step-container">
          <div class="input-group">
            <input nbInput type="text" placeholder="Education" class="form-control" formControlName="thirdCtrl"
                   [ngClass]="{'form-control-danger': thirdForm.invalid && (thirdForm.dirty || thirdForm.touched)}">
          </div>
          <button class="mt-3" nbButton nbStepperPrevious type="button">prev</button>
          <button class="mt-3 ms-3" nbButton nbStepperNext type="button" (click)="confirmForms()">Confirm</button>
        </form>
      </nb-step>

      <nb-step [stepControl]="thirdForm" [hidden]="true" label="Third step">
        <div class="step-container">
          <h3>CV completed!</h3>
          <button class="mt-3" nbButton (click)="stepper.reset()">Try again</button>
        </div>
      </nb-step>
    </nb-stepper>
  </nb-card-body>
</nb-card>
